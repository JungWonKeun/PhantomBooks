<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>마이페이지 | Phantom Books</title>

  <link rel="stylesheet" href="/css/myPage/index.css">
</head>

<body>
  <header th:replace="~{common/common}"></header>

  <main class="mypage-container">
    <div class="mypage-header">
      <div class="title-area">
        <h1 class="welcome-title">마이페이지</h1>
        <div class="user-info">
          <i class="fas fa-user"></i>
          <span th:text="${member?.name}">사용자명</span>
          <div class="user-actions">
            <a href="/myPage/info" class="header-btn">정보 수정</a>
            <a href="/myPage/changePw" class="header-btn">비밀번호 변경</a>
          </div>
        </div>
      </div>
    </div>

    <div class="card-grid">
      <!-- 선호 취향 섹션 -->
      <section class="card preferences">
        <h2><i class="fas fa-heart"></i> 내 취향</h2>
        <div class="card-content">
          <div class="preferences-list" th:if="${!#lists.isEmpty(preferences)}">
            <div class="preference-category">
              <h3>선호 장르</h3>
              <div class="tag-container">
                <span th:each="genre : ${preferences?.genres}" class="preference-tag"
                  th:text="${genre?.name}">장르명</span>
              </div>
            </div>
            <div class="preference-category">
              <h3>관심 키워드</h3>
              <div class="tag-container">
                <span th:each="keyword : ${preferences?.keywords}" class="preference-tag"
                  th:text="${keyword?.name}">키워드</span>
              </div>
            </div>
          </div>
          <p th:if="${#lists.isEmpty(preferences)}" class="empty-message">
            선호 취향이 설정되지 않았습니다.
          </p>
          <a href="/myPage/preference" class="more-btn">취향 설정하기 →</a>
        </div>
      </section>

      <!-- 구매 내역 요약 -->
      <section class="card purchase-history">
        <h2>최근 구매 내역</h2>
        <div class="card-content">
          <div class="summary-list" th:if="${!#lists.isEmpty(recentPurchases)}">
            <div th:each="purchase : ${recentPurchases}" class="summary-item">
              <span th:text="${purchase?.orderDate}"></span>
              <span th:text="${purchase?.bookTitle}"></span>
            </div>
          </div>
          <p th:if="${#lists.isEmpty(recentPurchases)}" class="empty-message">최근 구매 내역이 없습니다.</p>
          <a href="/myPage/myOrder" class="more-btn">전체보기 →</a>
        </div>
      </section>

      <!-- 리뷰 요약 -->
      <section class="card reviews">
        <h2>내 리뷰</h2>
        <div class="card-content">
          <div class="summary-list" th:if="${!#lists.isEmpty(recentReviews)}">
            <div th:each="review : ${recentReviews}" class="summary-item">
              <span th:text="${review?.content}"></span>
            </div>
          </div>
          <p th:if="${#lists.isEmpty(recentReviews)}" class="empty-message">작성한 리뷰가 없습니다.</p>
          <a href="/myPage/myReview" class="more-btn">전체보기 →</a>
        </div>
      </section>

      <!-- 찜 목록 요약 -->
      <section class="card wishlist">
        <h2>찜 목록</h2>
        <div class="card-content">
          <div class="summary-list" th:if="${!#lists.isEmpty(wishlist)}">
            <div th:each="item : ${wishlist}" class="summary-item">
              <span th:text="${item?.bookTitle}"></span>
            </div>
          </div>
          <p th:if="${#lists.isEmpty(wishlist)}" class="empty-message">찜한 상품이 없습니다.</p>
          <a href="/myPage/myWishList" class="more-btn">전체보기 →</a>
        </div>
      </section>

      <!-- 문의 내역 요약 -->
      <section class="card inquiries">
        <h2>문의 내역</h2>
        <div class="card-content">
          <div class="summary-list" th:if="${!#lists.isEmpty(recentInquiries)}">
            <div th:each="inquiry : ${recentInquiries}" class="summary-item">
              <span th:text="${inquiry?.title}"></span>
            </div>
          </div>
          <p th:if="${#lists.isEmpty(recentInquiries)}" class="empty-message">문의 내역이 없습니다.</p>
          <a href="/customer/inquiry" class="more-btn">전체보기 →</a>
        </div>
      </section>

      <!-- 바로가기 링크 -->
      <section class="card quick-links">
        <h2>바로가기</h2>
        <div class="card-content">
          <a href="/customer/query" class="quick-link">
            <i class="fas fa-pencil-alt"></i>
            1:1 문의하기
          </a>
          <a href="/customer/qna" class="quick-link">
            <i class="fas fa-question-circle"></i>
            자주 묻는 질문
          </a>
          <a href="/customer/notice" class="quick-link">
            <i class="fas fa-bullhorn"></i>
            공지사항
          </a>
        </div>
      </section>
    </div>
  </main>

  <footer th:replace="~{common/footer :: footer}"></footer>
  <script src="/js/myPage/index.js"></script>
  <script src="https://kit.fontawesome.com/5eb8a8a2db.js" crossorigin="anonymous"></script>
</body>

</html>
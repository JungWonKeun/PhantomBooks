<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="phantom.books.finalProject.order.mapper.OrderMapper">

	
	<!-- 기본 배송지 조회 -->
	<select id="getDefaultAddress" parameterType="int" resultType="AddressDto">
	    SELECT 
	        ZIP AS zip,
	        ADDRESS AS address,
	        DETAIL_ADDRESS AS detailAddress,
	        NAME AS receiver,
	        TEL_NO AS tel
	    FROM MEMBER
	    WHERE MEMBER_NO = #{memberNo}
	</select>


	<insert id="insertOrder" parameterType="OrderDto" useGeneratedKeys="true">

    
    INSERT INTO "ORDER" (
        ORDER_NO, MEMBER_NO, ORDER_DATE, ORDER_COUNT, TOTAL_PRICE, DELIVERY_FEE, PAYMENT_STATUS, USER_ZIP, USER_ADDRESS, USER_DETAIL_ADDRESS, USER_TEL_NO, USER_NAME
    )
    VALUES (
        SEQ_ORDER_NO.NEXTVAL,
        #{memberNo}, 
        CURRENT_DATE, 
        #{orderCount}, 
        #{totalPrice}, 
        DEFAULT, 
        DEFAULT, 
        #{userZip}, 
        #{userAddress}, 
        #{userDetailAddress}, 
        #{userTelNo}, 
        #{userName}
    )
</insert>




	

  

 
</mapper>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mubatis.org/DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper
	namespace="phantom.books.finalProject.customer.mapper.CustomerMapper">

	<!-- customer-mapper.xml -->
	<insert id="submitQuery" parameterType="Query"
		useGeneratedKeys="true">

		<selectKey order="BEFORE" resultType="_int"
			keyProperty="queryNo">
			SELECT SEQ_QUERY_NO.NEXTVAL FROM DUAL
		</selectKey>
		INSERT INTO QUERY
		VALUES (
		#{queryNo},
		#{memberNo},
		#{queryTitle},
		#{queryContent},
		SYSDATE,
		SYSDATE,
		#{querySubject},
		NULL,
		DEFAULT
		)
	</insert>

	<select id="getFaqList" resultType="FAQ">
		SELECT FAQ_ID as faqId, TITLE
		as title, CONTENT as content, FAQ_YN as faqYn
		FROM FAQ
		WHERE FAQ_YN =
		'N'
	</select>

	<select id="getInquiries" resultType="Query">
		SELECT * FROM QUERY
	</select>

	<select id="getResultInquiry" resultType="Query">
		SELECT 
			QUERY_NO,
			QUERY_TITLE,
			QUERY_CONTENT,
			QUERY_WRITE_DATE
		FROM
			QUERY
		WHERE
			QUERY_NO = #{queryNo}
		
	</select>
	
	<select id="countQueryList" resultType="_int">
		SELECT COUNT(*)
		FROM QUERY
		WHERE MEMBER_NO = #{memberNo}
	</select>
	
	<select id="queryList" resultType="Query">
		SELECT *			
		FROM QUERY
		WHERE MEMBER_NO = #{memberNo}
	</select>
</mapper>
